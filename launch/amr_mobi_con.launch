<launch>
    <!-- 基础参数配置 -->
    <arg name="com" default="/dev/om_controller" />
    <arg name="baudrate" default="230400"/>
    <arg name="updateRate" default="20"/>
    <arg name="secondGen" default="1"/>
    <arg name="globalID" default="1"/>

    <!-- Modbus主节点 -->
    <node pkg="om_modbus_master" name="om_modbusRTU_1" type="om_modbusRTU_node" output="screen">
        <param name="init_com" value="$(arg com)"/>
        <param name="init_topicID" value="1"/>
        <param name="init_baudrate" value="$(arg baudrate)"/>
        <param name="init_update_rate" value="$(arg updateRate)"/>
        <param name="second_gen" value="$(arg secondGen)"/>
        <param name="global_id" value="$(arg globalID)"/>
        <param name="axis_num" value="1"/>
    </node>

    <!-- AMR ROS Bridge节点 -->
    <node name="amr_ros_bridge" pkg="om_modbus_master" type="amr_ros_bridge" output="screen">
        <!-- 话题重映射 -->
        <remap from="imu" to="/imu"/>
        <remap from="odom" to="/odom"/>
        <remap from="cmd_vel" to="/cmd_vel"/>

        <!-- 基本参数配置 -->
        <param name="update_rate" value="20.0"/>
        <param name="base_frame" value="base_footprint"/>
        <param name="odom_frame" value="odom"/>
        <param name="imu_frame" value="imu_link"/>
    </node>

</launch>