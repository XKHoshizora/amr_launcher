<launch>
    <!-- 使用实际的时间 -->
    <param name="/use_sim_time" value="false" />
    
    <!-- 载入机器人模型 -->
    <include file="$(find amr_launcher)/launch/amr_description.launch"/>

    <!-- RPLiDAR -->
    <include file="$(find amr_launcher)/launch/amr_rplidar_s2.launch"/>
    
    <!-- 通过 laser_filters 过滤激光的角度范围，需要 laser-filters 功能包 -->
    <node pkg="laser_filters" type="scan_to_scan_filter_chain" name="laser_filter" output="screen">
        <param name="scan_filter_chain" value="$(find amr_launcher)/config/laser/laser_filter.yaml"/>
        <remap from="scan" to="/scan"/> <!-- 原始激光雷达数据话题 -->
        <remap from="scan_filtered" to="/filtered_scan"/> <!-- 过滤后的激光雷达数据 -->
    </node>

    <!-- om_modbusRTU_node & om_ros_node -->
    <include file="$(find amr_launcher)/launch/amr_mobi_con.launch"/>

    <!-- IMU -->
    <!-- <include file="$(find amr_imu)/launch/amr_imu.launch"/> -->

    <!-- SLAM -->
    <include file="$(find amr_launcher)/launch/amr_slam_gmapping.launch">
        <!-- 参数配置 -->
        <!-- <rosparam> 用于覆盖 YAML 中的内容来设置节点的内部参数 -->
    </include>
    <!-- <include file="$(find amr_launcher)/launch/amr_slam_hector.launch"/> -->
    <!-- <include file="$(find amr_launcher)/launch/amr_slam_cartographer.launch"/> -->

    <!-- Controller -->
    <include file="$(find amr_launcher)/launch/amr_controller.launch"/>

    <!-- RViz -->
    <node name="rviz" pkg="rviz" type="rviz" args="-d $(find amr_launcher)/config/rviz/slam.rviz" />

</launch>
